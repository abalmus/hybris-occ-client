# Generator

This is used to generator OCC Swagger Client

### Prerequisites

- Node v6
- Hybris OCC RAML and HTML file
  - Example HTML location: https://help.hybris.com/6.4.0/api/ycommercewebservices/main.html
  - Example RAML location: https://help.hybris.com/6.4.0/api/ycommercewebservices/main.raml

Put the files in `src/{version}/`
_Example: `src/6.4.0/`_

## Getting Started

```sh
git clone git@github.com:mobify/hybris-api-js-client.git
npm i
npm run generate 6.4.0(replace 6.4.0 with your version)
```
Compress `main.raml` and everything generated in `dist/` and upload the zip file to `https://apimatic.io/transformer` to convert your RAML to swagger 2.0
Proceed to next section once you obtain `swagger.json`

## Steps to create OCC Swagger Client

1. Install 'swagger-codegen' using home-brew 'brew install swagger-codegen'
2. Create a directory where you want your client to be generated and cd into this directory.
3. Create a new file called 'lang-conf.json'
4. Edit the above file with the specific language options you want. You can see the options for the specific language using the following command 'swagger-codegen config-help -l javascript' replace javascript with the choice you want. In our case the configuration will look like this: 

{
    "useES6": true,
    "usePromises": true
}

5. We are ready to generate the client now. Using the swagger file generated by your API run the following command 'swagger-codegen generate -c lang-conf.json -i swagger.json -l javascript --model-name-suffix Model --model-package models'


Post Client Creation Steps

In some cases your code may still not compile, you can check this by running 'npm test'. This will show you any compilation errors that may occur. 

Some common issues are model properties not having their underscore name translated to camelCase correctly. This is an easy fix, but make sure you don't change any references to the origin data aka the places where the json is being accessed. 

You may also have to change the version number in the package.json file as it's value is sometimes no valid, in this case we changed 17.8 â€”> 0.17.8

Additionally you might have class import name conflicts. This happens when a model has a property that is the same type as itself. An example would be a product with a bundledProducts property, where the bundledProducts is an array of Products. In this case you'll have to alter the import at the top of the file, e.g. 'import {Product as ProductInternal} from ./Product' and updating any references in the code.
